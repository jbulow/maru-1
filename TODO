TALK FOR ReGIS - slides sent by Feb 22nd

TALK FOR KITA - talk on Feb 24th

----------------------------------------------------------------

Syntax for namespaces.

reader:
	Foo.bar.baz -> (in (in Foo bar) baz)

expand:
	(in x y) ->	spc = findVariable(env, x)->value;
			var = findVariable(spc, y);

----------------------------------------------------------------

strings are arrays of ucs4
symbols are ucs4
read converts utf8 to ucs4
write converts ucs4 to utf8

tokens should contain the FILE name and the LINE number and maybe character COLUMNs for debugging

put support only in peg.l, boot only in peg-boot.l

make experimental/demo syntax for stdin
	m-expr like?
	Smalltalk like?
		make selectors be:
			.*: = keyword
			<bin>.*<bin> = binary
			anything else is unary

put peg IR -> s-exp compiler in peg-boot and generate peg-compile.l (grammar in PEG -> compiled parser)
	add mechanism to instantiate in-place

PEG grammar should look like structure:
	$> = output stream
	$< = input stream
	$* = current list result
	$@ = current result
	rules are methods defined on the structure, prefixed with $
	structures inherit dynamically

make eval.c eval.l use WIDE CHARACTERS

propagate changes eval.c -> eval.l

inheritance between structures

active variables
	implement inst var access by name

split emit.l into
	emit-common.l	the stuff that does not depend on the target language
	emit-386.l	static x86 code
	emit-c.l	static C code

make local variables store level delta not absolute level
	-> new <variable> object for each delta of free reference

optimise eval.c for
	size check on invocation
	cached allocation behavior - dlist

----------------------------------------------------------------

make encode rewrite r-value variables as the value when value is subr

----------------------------------------------------------------

split <ptr> type from <long>.

port streams.

port PEG.

----------------------------------------------------------------

The crux of the biscuit is: If it entertains you, fine.  Enjoy it.  If
it doesn't, then blow it out your ass.  I do it to amuse myself.  If I
like it, I release it.  If somebody else likes it, that's a bonus.
-- Frank Zappa
